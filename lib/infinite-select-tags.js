!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("element-ui/lib/button"),require("infinite-ui/lib/utils/index"),require("element-ui/lib/input"),require("element-ui/lib/tooltip"),require("element-ui/lib/select"),require("element-ui/lib/option"),require("element-ui/lib/checkbox"),require("element-ui/lib/tag"));else if("function"==typeof define&&define.amd)define(["element-ui/lib/button","infinite-ui/lib/utils/index","element-ui/lib/input","element-ui/lib/tooltip","element-ui/lib/select","element-ui/lib/option","element-ui/lib/checkbox","element-ui/lib/tag"],t);else{var i="object"==typeof exports?t(require("element-ui/lib/button"),require("infinite-ui/lib/utils/index"),require("element-ui/lib/input"),require("element-ui/lib/tooltip"),require("element-ui/lib/select"),require("element-ui/lib/option"),require("element-ui/lib/checkbox"),require("element-ui/lib/tag")):t(e["element-ui/lib/button"],e["infinite-ui/lib/utils/index"],e["element-ui/lib/input"],e["element-ui/lib/tooltip"],e["element-ui/lib/select"],e["element-ui/lib/option"],e["element-ui/lib/checkbox"],e["element-ui/lib/tag"]);for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(window,(function(e,t,i,n,s,o,l,r){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=45)}({0:function(e,t,i){"use strict";function n(e,t,i,n,s,o,l,r){var a,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),l?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=a):s&&(a=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),a)if(c.functional){c._injectStyles=a;var u=c.render;c.render=function(e,t){return a.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,a):[a]}return{exports:e,options:c}}i.d(t,"a",(function(){return n}))},1:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-button",{staticClass:"infinite-button",attrs:{disabled:e.disabled,plain:e.plain,round:e.round,circle:e.circle,size:e.size,type:e.type},on:{click:e.handleClick}},[e.icon?i("i",{class:e.icon}):e._e(),e._v(" "),e.$slots.default?[e._t("default")]:e._e()],2)};n._withStripped=!0;var s=i(2),o={name:"InfiniteButton",components:{ElButton:i.n(s).a},props:{type:{type:String,default:"default"},plain:{type:Boolean},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean},icon:{type:String,default:""},size:{type:String,default:"small"}},methods:{recursionSetBtnRmFocus:function(e){"BUTTON"===e.nodeName?e.blur():this.recursionSetBtnRmFocus(e.parentNode)},handleClick:function(e){this.recursionSetBtnRmFocus(e.target),this.$emit("click",e)}}},l=i(0),r=Object(l.a)(o,n,[],!1,null,null,null);r.options.__file="packages/infinite-button/src/index.vue";t.a=r.exports},11:function(e,t){e.exports=l},2:function(t,i){t.exports=e},26:function(e,t){e.exports=r},3:function(e,i){e.exports=t},4:function(e,t){e.exports=i},45:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"infinite-select-tags"},[i("el-select",{ref:"infiniteSekectTags",attrs:{value:[],multiple:"","popper-class":"infinite-select-popover "+(e.filterable?"infinite-select-filterable":""),"popper-append-to-body":!1,placeholder:e.defaultPlaceholder,size:e.size},on:{"visible-change":e.visibleChange}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.filterable,expression:"filterable"}],staticClass:"infinite-select-search",class:e.infiniteSelectTagsOptionRefScrollTop?"is-shadow":""},[i("el-input",{attrs:{placeholder:e.serachPlaceholder,size:e.size,clearable:e.clearable,"prefix-icon":"el-icon-search"},model:{value:e.serachKeyWord,callback:function(t){e.serachKeyWord="string"==typeof t?t.trim():t},expression:"serachKeyWord"}})],1),e._v(" "),e.hasFilterData?e._e():i("div",{staticClass:"search-before-component"},[e._t("not-filter-data")],2),e._v(" "),i("infinite-select-tags-option",{ref:"infiniteSelectTagsOptionRef",attrs:{options:e.newOptions,"show-checked":e.showChecked,"disabled-keys":e.disabledKeys,"titled-desc-options":e.titledDescOptions,"parent-ids":e.parentIds,maxLevel:e.maxLevel,showKeys:e.showKeys,"tooltip-popper":e.tooltipPopper},on:{change:e.checkBoxChange}}),e._v(" "),e._l(e.newOptions,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id}})})),e._v(" "),i("div",{staticClass:"infinite-select-button"},[i("el-checkbox",{attrs:{indeterminate:e.indeterminate},on:{change:e.allSelect},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("全选")]),e._v(" "),i("infinite-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){return e.makeSure(!1)}}},[e._v("确定")])],1),e._v(" "),i("template",{slot:"prefix"},[i("div",{staticClass:"infinite-selected",attrs:{slot:"reference"},slot:"reference"},[i("span",{ref:"infiniteSelectedTagPrefixRef",staticClass:"infinite-selected-tag-prefix"},[e._t("prefix-label")],2),e._v(" "),e.filterShowLabels.length>0?i("div",{ref:"infiniteSelectedTagRef",staticClass:"infinite-selected-tag"},[e._l(e.filterShowLabels,(function(t,n){return i("el-tag",{directives:[{name:"show",rawName:"v-show",value:n<e.tagsNum,expression:"i < tagsNum"}],key:t,attrs:{size:e.size}},[e._v(e._s(t))])})),e._v(" "),e.filterShowLabels.length>e.tagsNum?i("el-tag",{staticClass:"last-tag",attrs:{size:e.size}},[e._v("+"+e._s(e.filterShowLabels.length-e.tagsNum))]):e._e()],2):e._e()])])],2)],1)};n._withStripped=!0;var s=i(4),o=i.n(s),l=i(26),r=i.n(l),a=i(6),c=i.n(a),u=i(7),d=i.n(u),f=i(11),h=i.n(f),p=i(1),b=i(8),m=i(3),v={name:"InfiniteSelectTags",components:{ElInput:o.a,ElTag:r.a,ElSelect:c.a,ElOption:d.a,ElCheckbox:h.a,InfiniteButton:p.a,infiniteSelectTagsOption:b.a},model:{prop:"vModel",event:"change"},props:{options:{type:Array,default:function(){return[]}},defaultCheckeds:{type:Array,default:function(){return[]}},tagsNum:{type:Number,default:3},placeholder:{type:String,default:"请选择"},filterable:{type:Boolean,default:!1},vModel:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},serachPlaceholder:{type:String,default:"请输入字段名称"},clearable:{type:Boolean,default:!0},filterLabels:{type:Function,default:function(e){return e}},tooltipPopper:{type:String,default:""}},data:function(){return{allChecked:!1,checked:{},showChecked:{},maxLevel:2,serachKeyWord:"",infiniteSelectTagsOptionRefScrollTop:0}},computed:{defaultPlaceholder:function(){return this.labels.length>0?"":this.placeholder},labelKeys:function(){var e={};return this.titledDescOptions.forEach((function(t){e[t.id]=t.name})),e},filterShowLabels:function(){var e=this,t=[];this.titledDescOptions.forEach((function(i){e.checked[i.id]&&t.push(i.id)}));var i=this.filterLabels(t),n=[];return i.forEach((function(t){n.push(e.labelKeys[t])})),n},labels:function(){var e=this,t=[];return this.titledDescOptions.forEach((function(i){e.checked[i.id]&&t.push(i.name)})),t},newOptions:function(){return JSON.parse(JSON.stringify(this.options))},titledOptions:function(){return Object(m.jsonFlat)(this.newOptions)},titledDescOptions:function(){var e=Object(m.jsonFlat)(this.newOptions,{children:"children"},!0,2);return e},disabledKeys:function(){var e={};return this.options.forEach((function(t){(t.disabled||e[t.id])&&(e[t.id]=!0,t.children&&t.children.length&&t.children.forEach((function(t){e[t.id]=!0})))})),e},indeterminate:function(){var e=this,t=Object.keys(this.showChecked).filter((function(t){return e.showChecked[t]}));return!!(t.length&&t.length<this.titledOptions.length)},parentIds:function(){var e={};return this.titledDescOptions.forEach((function(t){t.children&&t.children.length&&t.children.forEach((function(i){e[i.id]=t.id}))})),e},showKeys:function(){var e=this,t={};return this.titledOptions.forEach((function(i){e.serachKeyWord?t[i.id]=i.name.includes(e.serachKeyWord):t[i.id]=!0})),Object.keys(t).forEach((function(i){t[i]&&e.parentIds[i]&&(t[e.parentIds[i]]=!0)})),t},hasFilterData:function(){return Object.values(this.showKeys).some((function(e){return e}))}},watch:{titledOptions:{handler:function(e){this.setChecked(["showChecked"])},immediate:!0},vModel:{handler:function(e,t){this.setChecked(["checked"])},immediate:!0},defaultCheckeds:{handler:function(e,t){if(e&&e.length){if(t&&t.join(",")===e.join(","))return;this.watchDefaultCheckedsChange(e),this.makeSure(!0)}},immediate:!0}},mounted:function(){var e=this;this.blur=this.$refs.infiniteSekectTags.blur,this.$nextTick((function(){var t=e.$refs.infiniteSelectedTagPrefixRef;(t.childNodes.length||t.innerText)&&(e.$refs.infiniteSekectTags.$el.querySelector("input").style.textIndent=t.offsetWidth+"px")}))},methods:{setChecked:function(e){var t=this;this.titledOptions.forEach((function(i){e.forEach((function(e){t.$set(t[e],i.id,t.vModel.includes(i.id))}))}))},initAllchecked:function(){var e=this,t=!0,i=[];Object.keys(this.showChecked).forEach((function(t){e.showChecked[t]&&i.push(t)})),this.titledOptions.forEach((function(e){t&&!i.includes(e.id)&&(t=!1)})),this.allChecked=t},makeSure:function(e){var t=this,i=[];Object.keys(this.showChecked).map((function(e){t.showChecked[e]&&i.push(e)})),this.$emit("change",i),e||this.$emit("makeSure"),this.blur&&this.blur()},allSelect:function(e){var t=this,i=this.updateNodeStatus(null,e);this.titledDescOptions.forEach((function(e){t.disabledKeys[e.id]||t.$set(t.showChecked,e.id,i)})),this.allChecked=i,this.$emit("allSelect",i)},visibleChange:function(e){var t=this,i=this.$refs.infiniteSelectTagsOptionRef;e?(this.setChecked(["showChecked"]),this.initAllchecked(),i.setTooltipDisabledFun(),this.infiniteSelectTagsOptionRefScrollTop=0,this.$nextTick((function(){t.$refs.infiniteSelectTagsOptionRef.$el.scrollTop=0})),i.$el.addEventListener("scroll",this.infiniteSelectTagsOptionRefScroll),this.serachKeyWord=""):i.$el.removeEventListener("scroll",this.infiniteSelectTagsOptionRefScroll)},infiniteSelectTagsOptionRefScroll:function(){this.infiniteSelectTagsOptionRefScrollTop=this.$refs.infiniteSelectTagsOptionRef.$el.scrollTop},watchDefaultCheckedsChange:function(e){var t=this;e.forEach((function(e){var i=t.titledOptions.filter((function(t){return t.id===e}))[0];t.setSiblingCheckbox(i,!0),t.makeSure(!0)}))},setSiblingCheckbox:function(e,t){var i=this,n=e.id,s=[n];this.titledDescOptions.forEach((function(e){var n=i.parentIds[e.id];s.includes(n)&&(s.push(e.id),i.$set(i.showChecked,e.id,t))}));var o=n;this.titledOptions.forEach((function(e){e.id===o&&(i.$set(i.showChecked,e.id,i.updateNodeStatus(e,t,!0)),o=i.parentIds[e.id]||o)}))},checkBoxChange:function(e,t,i){var n=this.updateNodeStatus(e,i);this.setSiblingCheckbox(e,n),this.initAllchecked(),this.$emit("checkBoxChange",n)},updateNodeStatus:function(e,t,i){var n=this,s=!!i;if(e)if(e.children&&e.children.length){var o=[e.id];this.titledOptions.forEach((function(e){n.disabledKeys[e.id]&&!i||o.includes(n.parentIds[e.id])&&(o.push(e.id),i?s&&!n.showChecked[e.id]&&(s=!1):s||n.showChecked[e.id]||(s=!0))}))}else s=t;else{var l=[];this.newOptions.forEach((function(e){l.push(e.id)})),this.titledDescOptions.forEach((function(e){n.disabledKeys[e.id]||l.includes(e.id)&&(l.push(e.id),s||n.showChecked[e.id]||(s=!0))}))}return s}}},g=i(0),y=Object(g.a)(v,n,[],!1,null,null,null);y.options.__file="packages/infinite-select-tags/src/index.vue";var k=y.exports;k.install=function(e){e.component(k.name,k)};t.default=k},5:function(e,t){e.exports=n},6:function(e,t){e.exports=s},7:function(e,t){e.exports=o},8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"infinite-select-group",class:"infinite-select-group-level-"+e.level},e._l(e.options,(function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showKeys[t.id]||1===e.level,expression:"showKeys[item.id] || level === 1"}],key:t.id,staticClass:"infinite-select-group-box",class:t.children&&t.children.length&&e.level<e.maxLevel?"exist-children":""},[i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.showKeys[t.id],expression:"showKeys[item.id]"}],attrs:{disabled:e.disabledKeys[t.id],indeterminate:e.getIndeterminate(t)},on:{change:function(i){return e.change(t,n,i)}},model:{value:e.showChecked[t.id],callback:function(i){e.$set(e.showChecked,t.id,i)},expression:"showChecked[item.id]"}},[i("el-tooltip",{attrs:{content:t.name,placement:"top",transition:"none","popper-class":"infinite-select-tags-tooltip-popper "+e.tooltipPopper,disabled:e.tooltipDisable[t.id]}},[i("div",{staticClass:"infinite-select-tags-tooltip"},[i("span",{ref:"infinite-select-tags-tooltip"+t.id,refInFor:!0},[e._v("\n            "+e._s(t.name)+"\n          ")])])])],1),e._v(" "),t.children&&t.children.length&&e.maxLevel>e.level?[i("infinite-select-tags-option",{ref:"infiniteSelectTagsOptionChildrenRef",refInFor:!0,attrs:{options:t.children,disabledKeys:e.disabledKeys,"show-checked":e.showChecked,level:e.level+1,showKeys:e.showKeys,maxLevel:e.maxLevel,"titled-desc-options":e.titledDescOptions,"parent-ids":e.parentIds},on:{change:e.change}})]:e._e()],2)})),0)};n._withStripped=!0;var s=i(11),o=i.n(s),l=i(5),r=i.n(l),a={name:"InfiniteSelectTagsOption",components:{ElCheckbox:o.a,ElTooltip:r.a},props:{options:{type:Array},titledDescOptions:{type:Array},showChecked:{type:Object,default:function(){}},disabledKeys:{type:Object,default:function(){}},level:{type:Number,default:1},maxLevel:{type:Number,default:6},parentIds:{type:Object,default:function(){}},showKeys:{type:Object,default:function(){}},tooltipPopper:{type:String,default:""}},data:function(){return{tooltipDisable:{}}},methods:{change:function(e,t,i){this.$emit("change",e,t,i)},getIndeterminate:function(e){var t=this,i=0,n=0,s=[e.id];return this.titledDescOptions.forEach((function(e){s.includes(t.parentIds[e.id])&&(i+=1,s.push(e.id),t.showChecked[e.id]&&(n+=1))})),!!(n>0&&n<i)},setTooltipDisabledFun:function(){var e=this;this.$nextTick((function(){e.options.forEach((function(t){var i=e.$refs["infinite-select-tags-tooltip"+t.id][0];e.$set(e.tooltipDisable,t.id,parseFloat(getComputedStyle(i.parentNode).width)>=i.offsetWidth)}));var t=e.$refs.infiniteSelectTagsOptionChildrenRef;t&&t.forEach((function(e){e.setTooltipDisabledFun()}))}))}}},c=i(0),u=Object(c.a)(a,n,[],!1,null,null,null);u.options.__file="packages/infinite-select-tags/src/infiniteSelectTagsOption.vue";t.a=u.exports}})}));